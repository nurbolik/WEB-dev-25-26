Сумма чисел от посетителя
важность: 5
Создайте скрипт, который предлагает посетителю ввести два числа, а затем показывает их сумму.

Запустите демонстрацию

P.S. Будьте внимательны с типами данных.

решение
let a = +prompt("The first number?", "");
let b = +prompt("The second number?", "");

alert( a + b );
Обратите внимание на унарный плюс + перед prompt. Он сразу преобразует значение в число.

В противном случае a и b были бы строками, а их сумма представляла бы собой их конкатенацию, то есть "1" + "2" = "12".


Почему 6.35.toFixed(1) == 6.3?
важность: 4
Согласно документации, Math.round и toFixed округляют до ближайшего числа: 0..4 округляет в меньшую сторону, а 5..9 — в большую.

Например:

alert( 1.35.toFixed(1) ); // 1.4
В аналогичном примере ниже, почему 6.35 округляется до 6.3, а не до 6.4?

alert( 6.35.toFixed(1) ); // 6.3
Как правильно округлить 6.35?

решение
Внутри десятичная дробь 6.35 представляет собой бесконечную двоичную дробь. Как и всегда в таких случаях, она хранится с потерей точности.

Давайте посмотрим:

alert( 6.35.toFixed(20) ); // 6.34999999999999964473
Потеря точности может привести как к увеличению, так и к уменьшению числа. В данном случае число стало немного меньше, поэтому оно было округлено в меньшую сторону.

А что для 1.35?

alert( 1.35.toFixed(20) ); // 1.35000000000000008882
Из-за потери точности число стало немного больше, поэтому оно округлилось в большую сторону.

Как решить проблему с 6.35 и добиться правильного округления?

Нужно приблизить число к целому значению перед округлением:

alert( (6.35 * 10).toFixed(20) ); // 63.50000000000000000000
Обратите внимание, что 63.5 не приводит к потере точности. Это связано с тем, что десятичная часть 0.5 на самом деле равна 1/2. Дроби, деленные на степени 2, точно представлены в двоичной системе счисления, поэтому мы можем округлить результат:

alert( Math.round(6.35 * 10) / 10 ); // 6.35 -> 63.5 -> 64(rounded) -> 6.4

Повторяйте, пока на входе не появится число
важность: 5
Создайте функцию readNumber, которая будет запрашивать число до тех пор, пока пользователь не введет корректное числовое значение.

Полученное значение должно быть возвращено в виде числа.

Пользователь также может остановить процесс, введя пустую строку или нажав «ОТМЕНА». В этом случае функция должна вернуть null.

Запустите демонстрационную версию

Откройте песочницу с тестами.

решение
function readNumber() {
  let num;

  do {
    num = prompt("Enter a number please?", 0);
  } while ( !isFinite(num) );

  if (num === null || num === '') return null;

  return +num;
}

alert(`Read: ${readNumber()}`);
Решение немного сложнее, чем могло бы быть, потому что нам нужно обработать null/пустые строки.

Таким образом, мы принимаем ввод до тех пор, пока он не станет «обычным числом». И null (отмена), и пустая строка также соответствуют этому условию, потому что в числовом виде они выглядят как 0.

После остановки нам нужно по-особому обработать null и пустую строку (вернуть null), потому что при преобразовании их в число получится 0.

Откройте решение с тестами в песочнице.


Случайный бесконечный цикл
важность: 4
Этот цикл бесконечен. Он никогда не завершится. Почему?

let i = 0;
while (i != 10) {
  i += 0.2;
}
решение
Это потому, что i никогда не будет равно 10.

Запустите код, чтобы увидеть реальные значения i:

let i = 0;
while (i < 11) {
  i += 0.2;
  if (i > 9.8 && i < 10.2) alert( i );
}
Ни одно из них не является в точности 10.

Такое происходит из-за потери точности при сложении дробей, например 0.2.

Вывод: избегайте проверок на равенство при работе с десятичными дробями.


Случайное число от min до max
важность: 2
Встроенная функция Math.random() создает случайное значение в диапазоне от 0 до 1 (не включая 1).

Напишите функцию random(min, max), которая генерирует случайное число с плавающей запятой в диапазоне от min до max (не включая max).

Примеры ее работы:

alert( random(1, 5) ); // 1.2345623452
alert( random(1, 5) ); // 3.7894332423
alert( random(1, 5) ); // 4.3435234525
решение
Нам нужно «перенести» все значения из интервала 0…1 в значения от min до max.

Это можно сделать в два этапа:

Если умножить случайное число от 0 до 1 на max-min, то интервал возможных значений увеличится с 0..1 до 0..max-min.
Теперь, если мы прибавим min, возможный интервал значений составит от min до max.
Функция:

function random(min, max) {
  return min + Math.random() * (max - min);
}

alert( random(1, 5) );
alert( random(1, 5) );
alert( random(1, 5) );

Случайное целое число от min до max
важность: 2
Создайте функцию randomInteger(min, max), которая генерирует случайное целое число от min до max, включая min и max в качестве возможных значений.

Любое число из интервала min..max должно появляться с одинаковой вероятностью.

Примеры работы функции:

alert( randomInteger(1, 5) ); // 1
alert( randomInteger(1, 5) ); // 3
alert( randomInteger(1, 5) ); // 5