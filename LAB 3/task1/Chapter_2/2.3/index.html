Современный режим «use strict»
Долгое время JavaScript развивался без проблем с совместимостью. В язык добавлялись новые возможности, а старые функции оставались прежними.

Преимущество такого подхода заключалось в том, что он не нарушал работу существующего кода. Но недостатком было то, что любая ошибка или неудачное решение создателей JavaScript оставались в языке навсегда.

Так было до 2009 года, когда появился ECMAScript 5 (ES5). Он добавил в язык новые возможности и изменил некоторые из существующих. Чтобы старый код продолжал работать, большинство таких изменений по умолчанию отключено. Их нужно включать вручную с помощью специальной директивы: "use strict".

“использовать строго”
Директива выглядит как строка: "use strict" или 'use strict'. Если она находится в начале скрипта, весь скрипт работает «по-современному».

Например:

"use strict";

// this code works the modern way
...
Совсем скоро мы познакомимся с функциями (способом группировки команд), поэтому давайте заранее отметим, что "use strict" можно ставить в начале функции. Это включает строгий режим только для этой функции. Но обычно его используют для всего скрипта.

Убедитесь, что директива use strict находится в самом начале
Пожалуйста, убедитесь, что "use strict" находится в верхней части ваших скриптов, иначе строгий режим может быть не включен.

Здесь строгий режим не включен:

alert("some code");
// "use strict" below is ignored--it must be at the top

"use strict";

// strict mode is not activated
Над "use strict". могут отображаться только комментарии.

Отменить нельзя use strict
Не существует директивы "no use strict" для возврата движка к прежнему поведению.

После перехода в строгий режим пути назад нет.

Консоль браузера
При использовании консоли разработчика для запуска кода обратите внимание, что по умолчанию она не use strict по умолчанию.

Иногда, когда use strict имеет значение, вы можете получить неверные результаты.

Так как же на самом деле use strict в консоли?

Во-первых, попробуйте нажать Shift+Enter для ввода нескольких строк и поставить use strict сверху, вот так:

'use strict'; <Shift+Enter for a newline>
//  ...your code
<Enter to run>
Это работает в большинстве браузеров, в том числе в Firefox и Chrome.

Если не работает, например в старом браузере, есть некрасивый, но надежный способ обеспечить use strict. Поместите код в такую обертку:

(function() {
  'use strict';

  // ...your code here...
})()
Стоит ли использовать strict?
Вопрос может показаться очевидным, но это не так.

Можно было бы рекомендовать начинать скрипты с "use strict"… Но знаете, что круто?

Современный JavaScript поддерживает «классы» и «модули» — продвинутые языковые структуры (мы обязательно к ним вернемся), которые автоматически включают use strict . Поэтому нам не нужно добавлять директиву "use strict", если мы их используем.

Итак, пока "use strict"; — желанный гость в начале ваших скриптов. Позже, когда весь ваш код будет написан в классах и модулях, вы сможете его не использовать.

На данный момент нам известно о use strict в общих чертах.

В следующих главах, по мере изучения языковых функций, мы увидим различия между строгим и старым стилями. К счастью, их не так много, и они действительно делают нашу жизнь проще.

Во всех примерах в этом руководстве используется строгий режим, если (что бывает крайне редко) не указано иное.